---

- name: Create configuration and source directories
  file: path={{ item }} state=directory
  with_items:
    - "{{ directories }}"

- name: Clone dotfiles repository
  git:
    repo: "{{ dotfiles_repo }}"
    dest: "{{ dotfiles_dest }}"

- name: Clone yay repository
  git:
    repo: https://aur.archlinux.org/yay.git
    dest: ~/src/yay
  when: ansible_facts['os_family'] == "Archlinux"

- name: Build yay with makepkg
  shell:
    cmd: makepkg -si
    chdir: ~/src/yay
    # Will not run if /usr/bin/yay exists.
    creates: /usr/bin/yay
  when: ansible_facts['os_family'] == "Archlinux"

- include_tasks: vim.yml
- include_tasks: zsh.yml
